name: CMSIS-NN AutoSync

on:
  schedule:
    # 6am UTC is 7am Central European Time (CET) or 8am Central European Summer Time (CEST).
    - cron: '0 7 * * SAT'
  workflow_dispatch:

jobs:
  AutoSync:
    runs-on: ubuntu-22.04
    steps:

    - uses: actions/checkout@v4
      with:
        persist-credentials: false

    - name: Download dependencies
      run: |
        pip install GitPython
        pip install numpy

    - name: Run Sync Script
      working-directory: ./Scripts
      run: python3 CMSIS_NN_sync.py

    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v5
      with:
        commit-message: |
              Automated Sync with CMSIS-NN
        title: Automated Sync with CMSIS-NN
        branch: sync
        token: ${{ secrets.CMSIS_SYNC_KEY }}


